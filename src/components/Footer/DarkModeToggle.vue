<template>
  <svg
    class="toggler"
    width="90"
    height="52"
    viewBox="0 0 90 52"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <g class="toggler__container" filter="url(#filter0_d)">
      <rect x="10" y="6" width="70" height="32" rx="16" fill="#109CF1" />
    </g>
    <transition name="toggle" appear class="toggler__circle">
      <rect
        @click="$store.dispatch('toggleDarkMode')"
        v-if="darkMode"
        x="13"
        y="9"
        width="26"
        height="26"
        rx="13"
        fill="white"
      />
      <rect
        @click="$store.dispatch('toggleDarkMode')"
        v-else
        x="50"
        y="9"
        width="26"
        height="26"
        rx="13"
        fill="white"
      />
    </transition>

    <path
      :class="darkMode ? 'dark-mode' : 'light-mode'"
      d="M29.1587 18.8412C28.4841 18.1666 27.5318 17.7301 26.5 17.7301C25.4683 17.7301 24.5159 18.1468 23.8413 18.8412C23.1667 19.5158 22.7302 20.4682 22.7302 21.5C22.7302 22.5317 23.1667 23.4841 23.8413 24.1587C24.5159 24.8333 25.4683 25.2698 26.5 25.2698C27.5318 25.2698 28.4841 24.8531 29.1587 24.1587C29.8333 23.4841 30.2699 22.5317 30.2699 21.5C30.2699 20.4682 29.8532 19.5158 29.1587 18.8412ZM28.4445 23.4444C27.9484 23.9404 27.254 24.2381 26.5 24.2381C25.746 24.2381 25.0516 23.9404 24.5556 23.4444C24.0595 22.9484 23.7619 22.2539 23.7619 21.5C23.7619 20.746 24.0595 20.0515 24.5556 19.5555C25.0516 19.0595 25.746 18.7619 26.5 18.7619C27.254 18.7619 27.9484 19.0595 28.4445 19.5555C28.9405 20.0515 29.2381 20.746 29.2381 21.5C29.2381 22.2539 28.9405 22.9484 28.4445 23.4444Z"
      fill="#109CF1"
    />
    <path
      :class="darkMode ? 'dark-mode' : 'light-mode'"
      d="M33.4841 20.9842H31.9564C31.6786 20.9842 31.4405 21.2223 31.4405 21.5001C31.4405 21.7778 31.6786 22.0159 31.9564 22.0159H33.4841C33.7619 22.0159 34 21.7778 34 21.5001C34 21.2223 33.7619 20.9842 33.4841 20.9842Z"
      fill="#109CF1"
    />
    <path
      :class="darkMode ? 'dark-mode' : 'light-mode'"
      d="M26.5 26.4405C26.2222 26.4405 25.9841 26.6786 25.9841 26.9564V28.4841C25.9841 28.7619 26.2222 29 26.5 29C26.7778 29 27.0159 28.7619 27.0159 28.4841V26.9564C27.0159 26.6786 26.7778 26.4405 26.5 26.4405Z"
      fill="#109CF1"
    />
    <path
      :class="darkMode ? 'dark-mode' : 'light-mode'"
      d="M31.7976 26.0833L30.7064 24.992C30.5278 24.7936 30.1905 24.7936 29.9921 24.992C29.7937 25.1904 29.7937 25.5079 29.9921 25.7063L31.0833 26.7976C31.2818 26.996 31.5992 26.996 31.7976 26.7976C31.996 26.5992 31.996 26.2817 31.7976 26.0833Z"
      fill="#109CF1"
    />
    <path
      :class="darkMode ? 'dark-mode' : 'light-mode'"
      d="M26.5 14C26.2222 14 25.9841 14.2381 25.9841 14.5159V16.0437C25.9841 16.3214 26.2222 16.5595 26.5 16.5595C26.7778 16.5595 27.0159 16.3214 27.0159 16.0437V14.5159C27.0159 14.2381 26.7778 14 26.5 14Z"
      fill="#109CF1"
    />
    <path
      :class="darkMode ? 'dark-mode' : 'light-mode'"
      d="M31.8175 16.2024C31.6191 16.004 31.3016 16.004 31.1032 16.2024L30.0119 17.2937C29.8135 17.4921 29.8135 17.8095 30.0119 18.0079C30.1905 18.2064 30.5278 18.2064 30.7262 18.0079L31.8175 16.9167C32.0159 16.7183 32.0159 16.4008 31.8175 16.2024Z"
      fill="#109CF1"
    />
    <path
      :class="darkMode ? 'dark-mode' : 'light-mode'"
      d="M21.0437 20.9842H19.5159C19.2381 20.9842 19 21.2223 19 21.5001C19 21.7778 19.2183 22.0159 19.5159 22.0159H21.0437C21.3214 22.0159 21.5595 21.7778 21.5595 21.5001C21.5595 21.2223 21.3214 20.9842 21.0437 20.9842Z"
      fill="#109CF1"
    />
    <path
      :class="darkMode ? 'dark-mode' : 'light-mode'"
      d="M22.9881 24.992C22.8095 24.7936 22.4722 24.7936 22.2738 24.992L21.1825 26.0833C20.9841 26.2817 20.9841 26.5992 21.1825 26.7976C21.381 26.996 21.6984 26.996 21.8968 26.7976L22.9881 25.7063C23.1865 25.5079 23.1865 25.1904 22.9881 24.992Z"
      fill="#109CF1"
    />
    <path
      :class="darkMode ? 'dark-mode' : 'light-mode'"
      d="M22.9881 17.2937L21.8968 16.2024C21.6984 16.004 21.381 16.004 21.1825 16.2024C20.9841 16.4008 20.9841 16.7183 21.1825 16.9167L22.2738 18.0079C22.4722 18.2064 22.7897 18.2064 22.9881 18.0079C23.1865 17.8095 23.1865 17.4921 22.9881 17.2937Z"
      fill="#109CF1"
    />
    <path
      :class="darkMode ? 'light-mode' : 'dark-mode'"
      d="M70.6454 23.5067C70.4921 23.4684 70.3387 23.5067 70.2045 23.6026C69.7061 24.0243 69.1311 24.3694 68.4985 24.5994C67.9042 24.8294 67.2524 24.9444 66.5623 24.9444C65.0096 24.9444 63.5911 24.3119 62.5751 23.2959C61.5591 22.2799 60.9265 20.8614 60.9265 19.3086C60.9265 18.6569 61.0416 18.0243 61.2333 17.4492C61.4441 16.8358 61.7508 16.2799 62.1534 15.8006C62.3259 15.5898 62.2876 15.2831 62.0767 15.1105C61.9425 15.0147 61.7892 14.9764 61.6358 15.0147C60.0064 15.4556 58.5879 16.4332 57.5719 17.7367C56.5943 19.0211 56 20.6122 56 22.3566C56 24.446 56.8435 26.3438 58.2237 27.724C59.6039 29.1042 61.5016 29.9477 63.5911 29.9477C65.3547 29.9477 66.9841 29.3342 68.2876 28.3183C69.6103 27.2831 70.5688 25.8071 70.9713 24.1202C71.0672 23.8326 70.9138 23.5643 70.6454 23.5067ZM67.7125 27.5132C66.6007 28.3949 65.1822 28.9317 63.6294 28.9317C61.8083 28.9317 60.1598 28.1841 58.9713 26.9956C57.7828 25.8071 57.0351 24.1585 57.0351 22.3374C57.0351 20.823 57.5336 19.4428 58.3962 18.331C58.9904 17.5642 59.738 16.9316 60.6007 16.4907C60.5048 16.7016 60.409 16.9125 60.3323 17.1425C60.0831 17.8326 59.9681 18.561 59.9681 19.3278C59.9681 21.1489 60.7157 22.8166 61.9042 24.0051C63.0927 25.1937 64.7604 25.9413 66.5815 25.9413C67.3866 25.9413 68.1534 25.8071 68.8627 25.5387C69.1119 25.4429 69.3611 25.347 69.5911 25.232C69.1311 26.1138 68.4985 26.8997 67.7125 27.5132Z"
      fill="white"
    />
    <defs>
      <filter
        id="filter0_d"
        x="0"
        y="0"
        width="90"
        height="52"
        filterUnits="userSpaceOnUse"
        color-interpolation-filters="sRGB"
      >
        <feFlood flood-opacity="0" result="BackgroundImageFix" />
        <feColorMatrix
          in="SourceAlpha"
          type="matrix"
          values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
        />
        <feOffset dy="4" />
        <feGaussianBlur stdDeviation="5" />
        <feColorMatrix
          type="matrix"
          values="0 0 0 0 0.0627451 0 0 0 0 0.611765 0 0 0 0 0.945098 0 0 0 0.24 0"
        />
        <feBlend
          mode="normal"
          in2="BackgroundImageFix"
          result="effect1_dropShadow"
        />
        <feBlend
          mode="normal"
          in="SourceGraphic"
          in2="effect1_dropShadow"
          result="shape"
        />
      </filter>
    </defs>
  </svg>
</template>

<script>
import { mapGetters } from "vuex";

export default {
  computed: {
    ...mapGetters(["isDarkMode"]),
    darkMode: {
      get() {
        return this.isDarkMode;
      },
      set(event) {
        this.$store.dispatch("toggleDarkMode");
      },
    },
  },
};
</script>

<style lang="scss" scoped>
.light-mode {
  z-index: 10;
  fill: white;
}
.dark-mode {
  z-index: 10;
  fill: $accentblue;
}
.toggler {
  z-index: 2;
}
.toggler__selector {
  cursor: pointer;
  z-index: 90;
  fill: white;
}
.toggler__circle {
  cursor: pointer;
}
.toggle-enter,
.toggle-leave-to {
  opacity: 0;
}
.toggle-enter-active {
  animation: popping 1s;
}

@keyframes popping {
  from {
    opacity: 0;
    transform: translateX(5px);
  }
  to {
    opacity: 1;
    transform: translateX(-0);
  }
}
</style>